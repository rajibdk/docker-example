node {
    // Get Artifactory server instance, defined in the Artifactory Plugin administration page.
    // def server = Artifactory.server "SERVER_ID"
    // Create an Artifactory Maven instance.
    def rtMaven = Artifactory.newMavenBuild()

    stage 'Clone sources'
    git url: 'https://github.com/jfrogdev/project-examples.git'

    stage 'Artifactory configuration'
    // Tool name from Jenkins configuration
    rtMaven.tool = "Maven-3.3.9"
   
    stage 'Maven build'
    def buildInfo = rtMaven.run pom: 'maven-example/pom.xml', goals: 'clean install'
}